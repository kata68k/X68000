#ifndef	IF_MOUSE_C
#define	IF_MOUSE_C

#include <stddef.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <io.h>
#include <time.h>
#include <doslib.h>
#include <iocslib.h>

#include <usr_macro.h>

#include "IF_Mouse.h"


/* 関数のプロトタイプ宣言 */
void Mouse_Init(void);
void Mouse_Exit(void);
void Mouse_GetPos(int32_t *, int32_t *);
void Mouse_SetPos(int32_t , int32_t);
void Mouse_GetDataPos(int8_t *, int8_t *, int8_t *, int8_t *);

/*===========================================================================================*/
/* 関数名	：	*/
/* 引数		：	*/
/* 戻り値	：	*/
/*-------------------------------------------------------------------------------------------*/
/* 機能		：	*/
/*===========================================================================================*/
void Mouse_Init(void)
{
	_iocs_ms_curon();
}

/*===========================================================================================*/
/* 関数名	：	*/
/* 引数		：	*/
/* 戻り値	：	*/
/*-------------------------------------------------------------------------------------------*/
/* 機能		：	*/
/*===========================================================================================*/
void Mouse_Exit(void)
{
	_iocs_ms_curof();
}

/*===========================================================================================*/
/* 関数名	：	*/
/* 引数		：	*/
/* 戻り値	：	*/
/*-------------------------------------------------------------------------------------------*/
/* 機能		：	*/
/*===========================================================================================*/
void Mouse_GetPos(int32_t *x, int32_t *y)
{
	int32_t pos;
	pos = _iocs_ms_curgt();
	
	*x = (pos >> 16) & 0xFFFF;
	*y = pos & 0xFFFF;
}

/*===========================================================================================*/
/* 関数名	：	*/
/* 引数		：	*/
/* 戻り値	：	*/
/*-------------------------------------------------------------------------------------------*/
/* 機能		：	*/
/*===========================================================================================*/
void Mouse_SetPos(int32_t x, int32_t y)
{
	_iocs_ms_curst(x, y);
}

/*===========================================================================================*/
/* 関数名	：	*/
/* 引数		：	*/
/* 戻り値	：	*/
/*-------------------------------------------------------------------------------------------*/
/* 機能		：	*/
/*===========================================================================================*/
void Mouse_GetDataPos(int8_t *x, int8_t *y, int8_t *left, int8_t *right)
{
	int32_t data;
	data = _iocs_ms_getdt();
	
	*x		= (int8_t)((data >> 24) & 0xFF);
	*y		= (int8_t)((data >> 16) & 0xFF);
	*left	= (int8_t)((data >>  8) & 0xFF);
	*right	= (int8_t)(data & 0xFF);
}

#endif	/* IF_MOUSE_C */

